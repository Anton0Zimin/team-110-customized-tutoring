<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <title>Team 110</title>
</head>

<body>
    <main class="container">
        <h1>Team 110</h1>
        <div class="grid">
            <div>
                <h2>Summary</h2>
                <div id="summary">⌛</div>
            </div>
            <div>
                <h2>Question</h2>
                <div id="question">⌛</div>
            </div>
        </div>
    </main>

    <script>
        let divSummary = document.getElementById('summary');
        let divQuestion = document.getElementById('question');

        fetch("/api/summary/1")
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                divSummary.textContent = '';

                for (row of data.summary) {
                    let text = document.createTextNode(row + ' ');
                    divSummary.appendChild(text);
                }
            })
            .catch(error => {
                console.error("Fetch error:", error);
                divSummary.innerText = error;
            });

        fetch("/api/questions/1")
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                divQuestion.textContent = '';

                let questionIndex = 0;
                let radioIndex = 0;

                for (item of data.questions) {
                    const p = document.createTextNode('p');
                    p.textContent = item.question;
                    divQuestion.appendChild(p);

                    for (answer of item.answers) {
                        const div = document.createElement('div');

                        const radio = document.createElement('input');
                        radio.name = 'radioQuestion' + questionIndex;
                        radio.id = 'radio' + radioIndex;
                        radio.type = 'radio';
                        div.appendChild(radio);

                        const label = document.createElement('label');
                        label.htmlFor = radio.id;
                        label.textContent = answer.text;
                        div.appendChild(label);

                        const p = document.createTextNode('p');
                        div.appendChild(p);

                        divQuestion.appendChild(div);
                        radioIndex++;
                    }

                    questionIndex++;
                }
            })
            .catch(error => {
                console.error("Fetch error:", error);
                divQuestions.innerText = error;
            });
    </script>
</body>

</html>